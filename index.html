<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Mastery - ä¸»é¡µ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <a href="index.html" class="active">ä¸»é¡µ</a>
        <a href="vocab.html">è¯æ±‡</a>
        <a href="speaking.html">å£è¯­</a>
        <a href="listening.html">å¬åŠ›</a>
        <a href="writing.html">å†™ä½œ</a>
        <a href="history.html">å†å²</a>
    </nav>
    <h1>English Mastery</h1>
    <div class="section">
        <h2>å­¦ä¹ è®¡åˆ’ (ç¬¬ <span id="dayNum"></span> å¤© / 180)</h2>
        <p>è¯æ±‡é‡: <span id="vocabCount">0</span> / 3000 | ç†Ÿç»ƒ: <span id="masteredCount">0</span></p>
        <progress id="vocabProgress" max="3000" value="0"></progress>
        <p>ä»Šæ—¥: <span id="date"></span> | è¿›åº¦: <span id="progress">0%</span> | æ—¶é•¿: <span id="timeSpent">0</span> åˆ†é’Ÿ</p>
        <p>é˜¶æ®µ: <span id="phase"></span></p>
        <button onclick="resetPlan()">é‡ç½®ä»Šæ—¥</button>
    </div>
    <div class="section">
        <h2>æ¯æ—¥ä»»åŠ¡ (2å°æ—¶)</h2>
        <p>è¯æ±‡ (35åˆ†é’Ÿ): å¤ä¹ 20ä¸ªæ—§è¯ï¼Œå­¦ä¹ 5ä¸ªæ–°è¯</p>
        <p>å£è¯­ (25åˆ†é’Ÿ): ç»ƒä¹ 3ä¸ªå¯¹è¯</p>
        <p>å¬åŠ› (30åˆ†é’Ÿ): å®Œæˆ1æ®µéŸ³é¢‘æµ‹éªŒ</p>
        <p>å†™ä½œ (30åˆ†é’Ÿ): å†™2ä¸ªå¥å­å¹¶æ ¸å¯¹</p>
        <p id="badge" class="badge"></p>
    </div>
    <script src="scripts.js"></script>
    <script>
        function updateUI() {
            const daily = getDailyContent();
            daily.words.forEach(w => { if (!vocab.some(v => v.text === w.word)) vocab.push({ text: w.word, phonetics: w.phonetics, meaning: w.meaning, sentence: w.sentence, mastery: 'learning', added: today }); });
            document.getElementById('vocabCount').textContent = vocab.length;
            document.getElementById('masteredCount').textContent = vocab.filter(w => w.mastery === 'mastered').length;
            document.getElementById('vocabProgress').value = vocab.length;
            document.getElementById('date').textContent = today;
            document.getElementById('dayNum').textContent = dayNum;
            let totalGoal = 20 + 5 + 3 + daily.audio.quiz.length + daily.writing.prompts.length;
            let completed = plan.review + plan.new + plan.speaking + plan.listening + plan.writing;
            document.getElementById('progress').textContent = `${Math.round((completed / totalGoal) * 100)}%`;
            document.getElementById('phase').textContent = dayNum <= 60 ? "åŸºç¡€ (ç¬¬1-2æœˆ)" : dayNum <= 120 ? "ä¸­çº§ (ç¬¬3-4æœˆ)" : "å†²åˆº (ç¬¬5-6æœˆ)";
            document.getElementById('badge').textContent = completed === totalGoal ? "ğŸ‰ ä»Šæ—¥å®Œæˆå¾½ç« ï¼" : "";
            saveData();
        }

        function resetPlan() {
            plan = { date: today, review: 0, new: 0, speaking: 0, listening: 0, writing: 0, time: 0 };
            vocab.forEach(w => w.mastery = 'learning');
            saveData();
            updateUI();
        }

        if (plan.date !== today) {
            history.push({ date: plan.date, progress: { ...plan } });
            resetPlan();
        }
        updateUI();

        document.querySelectorAll('nav a').forEach(link => {
            link.classList.toggle('active', link.href.includes(location.pathname));
        });
    </script>
</body>
</html>